<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>

    <title>Dominator.js @ github.com/mwbrooks</title>

    <link rel="stylesheet" type="text/css" href="style/dejavu-sans-mono/stylesheet.css" />
    <link rel="stylesheet" type="text/css" href="style/main.css" />

</head>

<body>
    <article>
        <header>
<pre>
<code>
dominator.open('#home')
         .click('a.redButton')
         .waitForPage('#boom')
         .destroy();
</code>
</pre>
        </header>

        <section id="synopsis">
            <h1>Synopsis</h1>
            <p>Dominator adds <a href="http://en.wikipedia.org/wiki/Functional_testing">functional test</a> assertions to <a href="http://docs.jquery.com/Qunit">QUnit</a>.</p>
            <p>Writing functional tests should be <a href="#example_tests">simple, readable</a>, and capable of <a href="#customizing">testing your home-brewed application</a>.</p>
            <p>For us, functional testing is a smoke screen. If you need more, then it may be time to abstract and unit test.</p>
        </section>

        <section id="usage">
            <h1>Usage</h1>
            <p>Here is a QUnit project using Dominator:</p>
<pre>
<code>
<span class="comment">&lt;!-- test framework (load QUnit first) --&gt;</span>
&lt;script type="text/javascript" src="qunit.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="dominator.js"&gt;&lt;/script&gt;

<span class="comment">&lt;!-- load application to test (optional) --&gt;</span>
&lt;script type="text/javascript"&gt;
    dominator.load({
        src:         '../index.html',
        id:          'app',
        name:        'app',
        width:       '320',
        height:      '480',
        scrolling:   'auto',
        frameborder: '0'
    });
&lt;/script&gt;

<span class="comment">&lt;!-- tests --&gt;</span>
&lt;script type="text/javascript" src="tests.js"&gt;&lt;/script&gt;
</code>
</pre>
            <p>and the QUnit assertions in tests.js:</p>
<pre id="example_tests">
<code>
module('open');

test('should open first page', function() {
    dominator.open('#home')
             .waitForPage('#home')
             .destroy();
});

module('settings');

test('should save settings', function() {
    dominator.open('#settings')
             .click('#save')
             .waitForEvent('document', 'settingsChange');
             .destroy();
});
</code>
</pre>
        </section>

        <section id="installing">
            <h1>Installing</h1>
            <h2>Dominator</h2>
<pre>
<code>
<span class="comment">&lt;!-- include dominator.js after qunit.js --&gt;</span>
&lt;script type="text/javascript" src="qunit.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="dominator.js"&gt;&lt;/script&gt;
</code>
</pre>
            <h2>Custom Dominators</h2>
<pre>
<code>
<span class="comment">&lt;!-- include custom dominators after dominator.js --&gt;</span>
&lt;script type="text/javascript" src="qunit.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="dominator.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="dominator.jqtouch.js"&gt;&lt;/script&gt;
</code>
</pre>
        </section>

        <section id="guide">
            <h1>Guide</h1>
            <h2>Setup</h2>
            <ol>
                <li>Setup a QUnit project</li>
                <li>Include script dominator.js</li>
                <li>Load your application and tests</li>
                <li>Run QUnit</li>
            </ol>
            <h2>Running QUnit</h2>
            <p>QUnit's auto-run is disabled in order to allow your test application to load.</p>
<pre>
<code>
// After loading the test and application
// you can safely start QUnit
QUnit.start();

// For convenience, the application loader
// will automatically call QUnit.start();
dominator.load(options);
</code>
</pre>
            <h2>Configuration</h2>
            <p>The Dominator configuration is stored in <code>dominator.config</code>.</p>
<pre>
<code>
// window {Object}
//
// The window handle to the test application.
// This must be set before calling QUnit.start();
//
// This value is used by all Dominator assertions.
//
// See the Reference section for more detail.
//
dominator.config.window = DOMElement;

// Feel free to pass any property or function
// that you extensions may need
//
// For example:
//
dominator.config.postResults = function(value) {
    // XHR POST results to a server
};
</code>
</pre>
            <h2>Using Dominator</h2>
            <p>Dominator assertions are chainable and executed with <code>destroy();</code></p>
<pre>
<code>
// Does nothing, but tries to run all queued assertions
dominator.destroy();

// Asserts that home page opened
dominator.open('#home')
         .destroy();

// Asserts that:
//   - home page opened
//   - a button inside the home page was clicked
dominator.open('#home')
         .click('#home a.button')
         .destroy();

// Same as above
dominator.open('#home');
dominator.click('#home a.button');
dominator.destroy();
</code>
</pre>
        </section>

        <section id="reference">
            <h1>Reference</h1>

            <h2 id="application-loader">Application Loader</h2>
            <p>An optional helper function to load the test application.</p>
<pre>
<code>
//
// Convenience function to load an application into an &lt;iframe /&gt;
//
// Can be called before or after adding the QUnit tests.
//
// - Sets dominator.config.window
// - Calls QUnit.start(); after the application has loaded
//
// @param options {Object} attributes to add to the &lt;iframe /&gt;
//
dominator.load({
    src:         '../index.html',
    id:          'app',
    name:        'app',
    width:       '320',
    height:      '480',
    scrolling:   'auto',
    frameborder: '0'
});
</code>
</pre>
            <h2>Assertions</h2>
            <p>Here are the cold, mechanical limbs of the dominator:</p>
<pre>
<code>
dominator.open('#home')

dominator.click('#home a.button')

dominator.waitForVisible('#home .notification')

dominator.waitForNotVisible('#home .error')

dominator.waitForEvent('#home a.button', 'touchend')

dominator.waitForPage('#settings')
</code>
</pre>
        </section>

        <section id="customizing">
            <h1>Customizing</h1>
            <p>Every application is structured different.</p>
            <p>This is why Dominator was designed for customization.</p>
            <p>Feel free to override any existing assertion and add your own.</p>
            <h2>Extend</h2>
<pre>
<code>
//
// Add and Override Assertions
//
// Add your arguments that you need, such as `id`.
// The final argument must be a callback function.
// Call the callback when your assertion is complete.
//
// This example adds `dominator.tap("body a.button");`
// and uses the XUI JavaScript library.
//
dominator.extend('tap', function(id, callback) {
    this.window.x$(id).trigger('mousedown');
    callback();
});
</code>
</pre>
            <h2>Window</h2>
<pre>
<code>
//
// Window Handle of Test Application
//
// While testing, you will need a handle to the
// application window.
//
// The window value is set before running QUnit.start() with:
//    dominator.config.window = window;
//
dominator.extend('tap', function(id, callback) {
    this.window.x$(id).trigger('tap');
    callback();
});
</code>
</pre>
            <h2>Expect</h2>
<pre>
<code>
//
// Expect an Assertion Count
//
// Tells QUnit how many assertions should fire.
//
// Typically, expect is used within extend.
//
// Expect will auto-increment the existing
// expectation count, so there is no need to worry
// about clobbering a preset value.
//
dominator.extend('tap', function(id, callback) {
    // 'tap' should fire on positive assertion
    this.expect(1);

    // 'tap' requires at least one tappable element
    if (x$(id).length > 0) ok(true, 'found at least one ' + id);

    x$(id).trigger('mousedown');
    callback();
});
</code>
</pre>
        </section>

        <section id="community">
            <h1>Community</h1>
            <h2>Google Groups</h2>
            <p>Please use the <a href="http://groups.google.com/group/phonegap">PhoneGap Google Group</a>.</p>
            <h2>IRC</h2>
            <p>Jump onto <a href="irc://irc.freenode.net/phonegap">#phonegap @ irc.free.node</a> and look for <a href="http://github.com/mwbrooks">mwbrooks</a></p>
            <h2>Direct Message</h2>
            <p>Contact <a href="https://github.com/inbox/new/mwbrooks">Michael Brooks</a> through a GitHub message.</p>
        </section>

        <section id="contribute">
            <h1>Contribute</h1>
            <h2>Improvements</h2>
            <p>Please use the <a href="https://github.com/mwbrooks/dominator.js/issues">GitHub Issue Tracker</a> to report a bug or discuss a change.</p>
            <h2>Pull Requests</h2>
            <p>I appreciate pull requests!</p>
            <p>I appreciate them more when on topic branch, instead of the master branch.</p>
            <h2>Everything else</h2>
            <p>Here are a few ideas:</p>
            <ul>
                <li>Minor Web design tweaks</li>
                <li>Usage feeback</li>
            </ul>
        </section>

        <section id="acknowledgement">
            <h1>Acknowledgement</h1>
            <ul>
                <li><a href="http://nitobi.com/">Nitobi</a> guys for running the library through the dirt</li>
                <li><a href="http://www.explodingdog.com/">Sam Brown</a> for the <a href="http://www.explodingdog.com/redrobot/">Red Robot</a> image</li>
            </ul>
        </section>

        <section id="license">
            <h1>License</h1>
            <p><a href="https://github.com/mwbrooks/dominator.js/blob/master/LICENSE">The MIT License</a></p>
        </section>

        <footer>
        </footer>
    </article>

    <a href="http://github.com/mwbrooks/dominator.js">
        <img style="position: absolute; top: 0; left: 0; border: 0;" src="style/image/ribbon.png" alt="Fork me on GitHub">
    </a>

    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-21515431-1");
            pageTracker._trackPageview();
        } catch(err) {}
    </script>
    <script type="text/javascript" src="js/hijs.js"></script>
</body>
</html>
