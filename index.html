<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>

    <title>Dominator.js @ github.com/mwbrooks</title>

    <link rel="stylesheet" type="text/css" href="style/dejavu-sans-mono/stylesheet.css" />
    <link rel="stylesheet" type="text/css" href="style/main.css" />

</head>

<body>
    <article>
        <header>
<pre>
<code>
dominator.open('#home')
         .click('a.redButton')
         .waitForPage('#boom')
         .destroy();
</code>
</pre>
        </header>

        <section id="synopsis">
            <h1>Synopsis</h1>
            <p>Dominator is a <a href="http://en.wikipedia.org/wiki/Functional_testing">functional test</a> library for the browser.</p>
            <p>Simply, it adds adds helpful and chainable methods to <a href="http://docs.jquery.com/Qunit">QUnit</a>.
               The API is designed to be readable and customizable to your web framework.</p>
        </section>

        <section id="usage">
            <h1>Usage</h1>
            <p>Here is a QUnit project using Dominator:</p>
<pre>
<code>
<span class="comment">&lt;!-- test framework (load QUnit first) --&gt;</span>
&lt;script type="text/javascript" src="qunit.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="dominator.js"&gt;&lt;/script&gt;

<span class="comment">&lt;!-- load application to test (optional) --&gt;</span>
&lt;script type="text/javascript"&gt;
    dominator.load({
        src:         '../index.html',
        id:          'app',
        name:        'app',
        width:       '320',
        height:      '480',
        scrolling:   'auto',
        frameborder: '0'
    });
&lt;/script&gt;

<span class="comment">&lt;!-- tests --&gt;</span>
&lt;script type="text/javascript" src="tests.js"&gt;&lt;/script&gt;
</code>
</pre>
            <p>and the QUnit assertions in tests.js:</p>
<pre>
<code>
module('open');

test('should open first page', function() {
    dominator.open('#home')
             .waitForPage('#home')
             .destroy();
});

module('settings');

test('should save settings', function() {
    dominator.open('#settings')
             .click('#save')
             .waitForEvent('document', 'settingsChange');
             .destroy();
});
</code>
</pre>
        </section>

        <section id="installing">
            <h1>Installing</h1>
            <h2>Dominator</h2>
<pre>
<code>
<span class="comment">&lt;!-- include dominator.js after qunit.js --&gt;</span>
&lt;script type="text/javascript" src="qunit.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="dominator.js"&gt;&lt;/script&gt;
</code>
</pre>
            <h2>Custom Dominators</h2>
<pre>
<code>
<span class="comment">&lt;!-- include custom dominators after dominator.js --&gt;</span>
&lt;script type="text/javascript" src="qunit.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="dominator.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="dominator.jqtouch.js"&gt;&lt;/script&gt;
</code>
</pre>
        </section>

        <section id="guide">
            <h1>Guide</h1>
            <p>dominator in global scope</p>
            <p>Chaining</p>
            <p>Running tests with QUnit.start();</p>
            <p>Configuration</p>
        </section>

        <section id="reference">
            <h1>Reference</h1>

            <h2 id="application-loader">Application Loader</h2>
            <p>An optional helper function to load the test application.</p>
<pre>
<code>
//
// Convenience function to load an application into an &lt;iframe /&gt;
//
// Can be called before or after adding the QUnit tests.
//
// - Sets dominator.config.window
// - Calls QUnit.start(); after the application has loaded
//
// @param options {Object} attributes to add to the &lt;iframe /&gt;
//
dominator.load({
    src:         '../index.html',
    id:          'app',
    name:        'app',
    width:       '320',
    height:      '480',
    scrolling:   'auto',
    frameborder: '0'
});
</code>
</pre>
            <h2>Assertions</h2>
<pre>
<code>
dominator.open('#home')

dominator.click('#home a.button')

dominator.waitForVisible('#home .notification')

dominator.waitForNotVisible('#home .error')

dominator.waitForEvent('#home a.button', 'touchend')

dominator.waitForPage('#settings')
</code>
</pre>
        </section>

        <section id="customizing">
            <h1>Customizing</h1>
            <p>Every application is structured different.</p>
            <p>This is why Dominator was designed for customization.</p>
            <p>Feel free to override any existing assertion and add your own.</p>
            <h2>Extend</h2>
<pre>
<code>
//
// Add and Override Assertions
//
// Add your arguments that you need, such as `id`.
// The final argument must be a callback function.
// Call the callback when your assertion is complete.
//
// This example adds `dominator.tap("body a.button");`
// and uses the XUI JavaScript library.
//
dominator.extend('tap', function(id, callback) {
    this.window.x$(id).trigger('mousedown');
    callback();
});
</code>
</pre>
            <h2>Window</h2>
<pre>
<code>
//
// Window Handle of Test Application
//
// While testing, you will need a handle to the
// application window.
//
// The window value is set before running QUnit.start() with:
//    dominator.config.window = window;
//
dominator.extend('tap', function(id, callback) {
    this.window.x$(id).trigger('tap');
    callback();
});
</code>
</pre>
            <h2>Expect</h2>
<pre>
<code>
//
// Expect an Assertion Count
//
// Tells QUnit how many assertions should fire.
//
// Typically, expect is used within extend.
//
// Expect will auto-increment the existing
// expectation count, so there is no need to worry
// about clobbering a preset value.
//
dominator.extend('tap', function(id, callback) {
    // 'tap' should fire on positive assertion
    this.expect(1);

    // 'tap' requires at least one tappable element
    if (x$(id).length > 0) ok(true, 'found at least one ' + id);

    x$(id).trigger('mousedown');
    callback();
});
</code>
</pre>
        </section>

        <section id="community">
            <h1>Community</h1>
        </section>

        <section id="contribute">
            <h1>Contribute</h1>
        </section>

        <section id="acknowledgement">
            <h1>Acknowledgement</h1>
        </section>

        <section id="license">
            <h1>License</h1>
        </section>

        <footer>
        </footer>
    </article>

    <a href="http://github.com/mwbrooks/dominator.js">
        <img style="position: absolute; top: 0; left: 0; border: 0;" src="style/image/ribbon.png" alt="Fork me on GitHub">
    </a>

    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-21515431-1");
            pageTracker._trackPageview();
        } catch(err) {}
    </script>
    <script type="text/javascript" src="js/hijs.js"></script>
</body>
</html>
